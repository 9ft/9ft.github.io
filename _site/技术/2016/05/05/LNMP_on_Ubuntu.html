<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" /> <!--[if lte IE 9]><meta http-equiv="refresh" content="0;url=/ie.html"><![endif]--> <title>Ubuntu 下安装 LNMP</title> <meta name="description" content="安装 LAMP咦？我们要安装 LNMP, 为什么要安装 LAMP 呢, 因为Ubuntu安装 LAMP 超级方便. 要其中的 MP."> <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,400italic,600|Droid+Sans+Mono' rel='stylesheet' type='text/css'> <link rel="stylesheet" href="/css/main.css"> <link rel="canonical" href="http://yourdomain.com/%E6%8A%80%E6%9C%AF/2016/05/05/LNMP_on_Ubuntu.html"> <link rel="alternate" type="application/rss+xml" title="Your awesome title" href="http://yourdomain.com/feed.xml" /> <script src="/assets/js/prefixfree.js"></script> </head> <body> <aside id="sidebar"> <div id="sidebar-left"> <a id="sidebar-avatar" href="/"> <img id="sidebar-avatar-img" alt="" src="/assets/img/avatar.jpg"/> </a> <div id="sidebar-social"> <a href="/feed.xml" class="sidebar-social-icon feed"></a> <a href="mailto:your-email@domain.com" class="sidebar-social-icon email"></a> </div> <ul id="sidebar-tags"> <li class="sidebar-tag active" data-filter="all">全部文章</li> </ul> </div> <div id="sidebar-right"> <div id="search-box"> <input id="search-input" type="text" placeholder="Search" /> </div> <nav id="toc"> <a class="toc-link" data-tags="" href="/%E6%8A%80%E6%9C%AF/2016/05/06/HEXO.html"> HEXO </a> <a class="toc-link" data-tags="" href="/%E6%8A%80%E6%9C%AF/2016/05/05/LNMP_on_Ubuntu.html"> Ubuntu 下安装 LNMP </a> <a class="toc-link" data-tags="" href="/%E6%8A%80%E6%9C%AF/2016/05/04/jekyll_nginx_on_VPS.html"> VPS上搭建 jekyll + nginx 博客 </a> <a class="toc-link" data-tags="" href="/%E6%8A%80%E6%9C%AF/2015/11/30/LAMP_Tomcat_FTP.html"> Ubuntu的LAMP+Tomcat+FTP安装 </a> <a class="toc-link" data-tags="" href="/%E6%8A%80%E6%9C%AF/2015/10/24/whow-to-run-cuda.html"> 运行第一个Cuda程序 </a> <a class="toc-link" data-tags="" href="/%E6%8A%80%E6%9C%AF/2015/10/22/x-window-fix.html"> Linux不能进入x window </a> <a class="toc-link" data-tags="" href="/%E6%8A%80%E6%9C%AF/2015/10/18/git-win-ssh.html"> Windows下使用Git的配置 </a> <a class="toc-link" data-tags="" href="/%E6%8A%80%E6%9C%AF/2015/10/17/sublime-config.html"> sublime 配置 </a> <a class="toc-link" data-tags="" href="/%E6%8A%80%E6%9C%AF/2015/10/14/ubuntu-installation.html"> Ubuntu 配置 </a> <a class="toc-link" data-tags="" href="/%E6%8A%80%E6%9C%AF/2015/10/12/build-v.html"> v_p_n 架设 </a> <a class="toc-link" data-tags="" href="/%E6%8A%80%E6%9C%AF/2015/10/12/build-ss.html"> ss搭建 </a> <a class="toc-link" data-tags="" href="/%E6%8A%80%E6%9C%AF/2015/10/11/Hello-World.html"> First Post </a> </nav> </div> </aside> <main id="main"> <article class="post container"> <div class="post-meta"> <span class="post-meta-span date">2016 May 05</span> </div> <h1 class="post-title">Ubuntu 下安装 LNMP</h1> <h1 id="lamp">安装 <code class="highlighter-rouge">LAMP</code></h1> <p>咦？我们要安装 <code class="highlighter-rouge">LNMP</code>, 为什么要安装 <code class="highlighter-rouge">LAMP</code> 呢, 因为Ubuntu安装 <code class="highlighter-rouge">LAMP</code> 超级方便. 要其中的 <code class="highlighter-rouge">MP</code>.</p> <div class="language-bash highlighter-rouge"><pre class="highlight"><code>sudo apt-get install lamp-server^
</code></pre></div> <p><code class="highlighter-rouge">php5-fpm</code> 和 <code class="highlighter-rouge">php5-mcrypt</code> 必须安装. 没安装上的话要手动安装. 其中: - <code class="highlighter-rouge">php5-fpm</code> 是 FastCGI Process Manager，是 Nginx 配合 PHP 所必须使用的. - <code class="highlighter-rouge">php5-mcrypt</code> 是 phpMyAdmin 需要使用到的.</p> <h1 id="nginx">安装配置 <code class="highlighter-rouge">Nginx</code></h1> <h2 id="section">安装</h2> <div class="language-bash highlighter-rouge"><pre class="highlight"><code>sudo apt-get install nginx
</code></pre></div> <p>## 配置</p> <h3 id="html">部署 <code class="highlighter-rouge">HTML</code></h3> <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">server</span> <span class="p">{</span>
  <span class="nx">listen</span> <span class="mi">80</span><span class="p">;</span>
  <span class="nx">listen</span> <span class="p">[</span><span class="err">::</span><span class="p">]</span><span class="err">:</span><span class="mi">80</span><span class="p">;</span>
  <span class="nx">root</span> <span class="o">/</span><span class="nx">usr</span><span class="o">/</span><span class="nx">share</span><span class="o">/</span><span class="nx">nginx</span><span class="o">/</span><span class="nx">example</span><span class="p">.</span><span class="nx">com</span><span class="p">;</span>
  <span class="nx">index</span> <span class="nx">index</span><span class="p">.</span><span class="nx">html</span> <span class="nx">index</span><span class="p">.</span><span class="nx">htm</span><span class="p">;</span>
  <span class="nx">server_name</span> <span class="nx">example</span><span class="p">.</span><span class="nx">com</span><span class="p">;</span>

  <span class="nx">location</span> <span class="o">/</span> <span class="p">{</span>
    <span class="nx">try_files</span> <span class="nx">$uri</span> <span class="nx">$uri</span><span class="o">/</span> <span class="o">=</span><span class="mi">404</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div> <h3 id="php">部署 <code class="highlighter-rouge">PHP</code></h3> <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">server</span> <span class="p">{</span>
  <span class="nx">listen</span> <span class="mi">80</span><span class="p">;</span>
  <span class="nx">listen</span> <span class="p">[</span><span class="err">::</span><span class="p">]</span><span class="err">:</span><span class="mi">80</span><span class="p">;</span>
  <span class="nx">server_name</span> <span class="nx">example</span><span class="p">.</span><span class="nx">com</span><span class="p">;</span>
  <span class="nx">root</span> <span class="o">/</span><span class="nx">usr</span><span class="o">/</span><span class="nx">share</span><span class="o">/</span><span class="nx">nginx</span><span class="o">/</span><span class="nx">example</span><span class="p">.</span><span class="nx">com</span><span class="p">;</span>
  <span class="nx">index</span> <span class="nx">index</span><span class="p">.</span><span class="nx">html</span> <span class="nx">index</span><span class="p">.</span><span class="nx">htm</span> <span class="nx">index</span><span class="p">.</span><span class="nx">php</span><span class="p">;</span>

  <span class="nx">location</span> <span class="o">/</span> <span class="p">{</span>
    <span class="nx">try_files</span> <span class="nx">$uri</span> <span class="nx">$uri</span><span class="o">/</span> <span class="o">=</span><span class="mi">404</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">location</span> <span class="o">~</span> <span class="err">\</span><span class="p">.</span><span class="nx">php$</span> <span class="p">{</span>
    <span class="nx">fastcgi_pass</span> <span class="na">unix</span><span class="p">:</span><span class="sr">/var/</span><span class="nx">run</span><span class="o">/</span><span class="nx">php5</span><span class="o">-</span><span class="nx">fpm</span><span class="p">.</span><span class="nx">sock</span><span class="p">;</span>
    <span class="nx">fastcgi_index</span> <span class="nx">index</span><span class="p">.</span><span class="nx">php</span><span class="p">;</span>
    <span class="nx">include</span> <span class="nx">fastcgi_params</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">location</span> <span class="o">~</span> <span class="sr">/</span><span class="se">\.</span><span class="sr">ht </span><span class="err">{
</span>    <span class="nx">deny</span> <span class="nx">all</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div> <p><code class="highlighter-rouge">PHP</code> 可以通过写个探针测试配置是否正确 <code class="highlighter-rouge">php &lt;?php phpinfo(); ?&gt; </code></p> <h1 id="phpmyadmin">安装配置 <code class="highlighter-rouge">phpmyadmin</code></h1> <h2 id="section-1">安装</h2> <div class="language-bash highlighter-rouge"><pre class="highlight"><code>sudo apt-get install phpmyadmin
</code></pre></div> <h2 id="section-2">配置</h2> <p>仿照上一节<code class="highlighter-rouge">部署 PHP</code>中为 <code class="highlighter-rouge">phpmyadmin</code> 设置访问入口. ```javascript server { listen 80; listen [::]:80; server_name phpmyadmin.example.com; root /usr/share/phpmyadmin; index index.php;</p> <p>location / { try_files $uri $uri/ =404; }</p> <p>location ~ .php$ { fastcgi_pass unix:/var/run/php5-fpm.sock; fastcgi_index index.php; include fastcgi_params; } location ~ /.ht { deny all; } } ```</p> <h2 id="mcrypt--php-">缺少 <code class="highlighter-rouge">mcrypt</code> 扩展。请检查 <code class="highlighter-rouge">PHP</code> 配置</h2> <p>如果出现<code class="highlighter-rouge">缺少 mcrypt 扩展。请检查 PHP 配置。</code>的提示.</p> <p>执行 <code class="highlighter-rouge">sudo apt-get install php5-mcrypt</code><br /> 配置<code class="highlighter-rouge">php.ini</code>，加上<code class="highlighter-rouge">extension=php_mcrypt.so</code>, 修改结果:</p> <div class="highlighter-rouge"><pre class="highlight"><code>;;;;;;;;;;;;;;;;;;;;;;
; Dynamic Extensions ;
;;;;;;;;;;;;;;;;;;;;;;
;
; If you wish to have an extension loaded automatically, use the following

extension=php_mcrypt.so
</code></pre></div> </article> <div class="post-share"> <div class="container"> <a href="https://twitter.com/share?url=http://yourdomain.com/%E6%8A%80%E6%9C%AF/2016/05/05/LNMP_on_Ubuntu.html&text=Ubuntu 下安装 LNMP" target="_blank" class="post-share-icon twitter"></a> <a href="https://www.evernote.com/clip.action?url=http://yourdomain.com/%E6%8A%80%E6%9C%AF/2016/05/05/LNMP_on_Ubuntu.html&title=Ubuntu 下安装 LNMP" target="_blank" class="post-share-icon evernote"></a> <a href="http://service.weibo.com/share/share.php?url=http://yourdomain.com/%E6%8A%80%E6%9C%AF/2016/05/05/LNMP_on_Ubuntu.html&title=Ubuntu 下安装 LNMP" target="_blank" class="post-share-icon weibo"></a> </div> </div> <div class="footer"> <div class="container"> <p class="footer-entry">All content is licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA</a></p> <p class="footer-entry">Buit with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> and <a href="https://github.com/P233/3-Jekyll" target="_blank">3-Jekyll theme</a> • Hosted on <a href="https://pages.github.com/" target="_blank">Github</a></p> </div> </div> </main> <button id="menu"> <span id="menu-icons"></span> </button> <script src="/assets/js/jquery-2.1.3.min.js"></script> <script src="/assets/js/jquery.pjax.js"></script> <script src="/assets/js/nprogress.js"></script> <script src="/assets/js/main.js"></script> </body> </html>
